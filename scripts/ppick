#!/bin/sh

if [ $# -lt 1 -o "$1" = "-h" ]
then
	echo usage: $0 "<lo> [<hi>]" >&2
	exit 1
fi


getarg() {
	if echo $1 | grep '^[0-9][0-9]*$' > /dev/null 2>&1 
	then
		echo "P == $1"
	else
		echo "$*"
	fi
}

LO=`getarg $1`
if [ $# -gt 1 ]
then
	HI=`getarg $2`
	echo "LO = '$LO', HI = '$HI'" >&2 
	pml -e "
		int P = 0;
		int allow = 0;

		{ P = P + 1; }
		?- $LO -? { allow = 1; }
		?- allow -? { send_no_free 0; }
		?- $HI -? { allow = 0; drop; }
		{ drop; }
	"
else
	pml -e "?- not ($LO) -? { drop; }"
fi


